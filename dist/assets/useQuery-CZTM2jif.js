import{r as c,l as E}from"./index-DRXcRlu0.js";function x(u,s=[],r){const[m,n]=c.useState(null),[y,t]=c.useState(!1),a=c.useRef(!0),f=c.useCallback(async()=>{var l,d;t(!0);try{const e=await u();a.current&&(n(e==null?void 0:e.data),(l=r==null?void 0:r.onSuccess)==null||l.call(r,e==null?void 0:e.data))}catch(e){a.current&&(E.error((e==null?void 0:e.message)||"Error occured"),(d=r==null?void 0:r.onError)==null||d.call(r,e))}finally{a.current&&t(!1)}},[u]);return c.useEffect(()=>(a.current=!0,f(),()=>{a.current=!1}),s),{data:m,loading:y,refetch:f}}export{x as u};
